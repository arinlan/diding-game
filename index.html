<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>æ»´æ»´å¤§ç¥å…»æˆè®° - å…¨é“¾è·¯æµ‹è¯•ç‰ˆ</title>
	<style>
		:root { --primary: #ff8903; --bg: #f5f7fa; }
		body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; }
		.app-container { width: 100%; max-width: 500px; background: white; min-height: 100vh; display: flex; flex-direction: column; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
		.header { background: linear-gradient(135deg, #ffb347, #ff8903); color: white; padding: 25px; text-align: center; }
		.score-board { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #fff; border-bottom: 5px solid var(--bg); }
		.stat-card { background: #fff8f0; padding: 10px; border-radius: 8px; text-align: center; }
		.stat-label { font-size: 12px; color: #666; }
		.stat-val { font-size: 18px; font-weight: bold; color: var(--primary); }
		.click-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
		.main-btn { width: 180px; height: 180px; border-radius: 50%; border: 8px solid #ffe8cc; background: white; cursor: pointer; position: relative; transition: 0.1s; }
		.main-btn:active { transform: scale(0.92); }
		.main-btn img { width: 100px; }
		.shop-container { height: 300px; overflow-y: auto; background: #fff; padding: 15px; border-top: 2px solid #eee; }
		.item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f0f0f0; }
		.buy-btn { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; }
		.buy-btn:disabled { background: #ccc; }
		.log-overlay { height: 50px; background: rgba(0,0,0,0.05); font-size: 12px; padding: 5px 15px; color: #777; overflow: hidden; }
	</style>
</head>
<body>
<div class="app-container">
	<div class="header">
		<h2 id="rank">ç§°å·ï¼šé¡ºé£èœé¸Ÿ</h2>
		<div style="font-size: 14px; opacity: 0.9;">ç­‰çº§ï¼š<span id="lv">1</span> / 3000</div>
	</div>
	<div class="score-board">
		<div class="stat-card"><div class="stat-label">æ€»é’ç¥¨</div><div class="stat-val" id="money">0</div></div>
		<div class="stat-card"><div class="stat-label">ç§’èµšæ”¶ç›Š</div><div class="stat-val" id="pps">0</div></div>
		<div class="stat-card"><div class="stat-label">æ˜Ÿçº§è¯„ä»·</div><div class="stat-val" id="stars">1.0 â˜…</div></div>
		<div class="stat-card"><div class="stat-label">å‡çº§éœ€</div><div class="stat-val" id="nextCost">10</div></div>
	</div>
	<div class="log-overlay" id="logs">æ¬¢è¿å¼€å¯æ»´æ»´å¤§ç¥ä¹‹è·¯...</div>
	<div class="click-area">
		<button class="main-btn" onclick="handleTap()">
			<div style="font-size: 40px;">ğŸš•</div>
			<div style="font-weight: bold; color: var(--primary);">ç‚¹å‡»å‡ºè½¦</div>
		</button>
		<button class="buy-btn" style="margin-top: 20px; width: 200px;" id="lvBtn" onclick="levelUp()">æå‡å¸æœºç­‰çº§</button>
	</div>
	<div class="shop-container" id="shop">
		</div>
</div>

<script>
	// 1. 23ä¸ªç­‰çº§ç§°å·æ•°æ®
	const RANKS = [
		{lv: 1, name: "æµæµªè½¦å‹"}, {lv: 10, name: "é¡ºé£æ–°äºº"}, {lv: 30, name: "èŒä¸šå¸æœº"}, 
		{lv: 60, name: "é»‘é“è½¦é•¿"}, {lv: 100, name: "é’é“œè½¦é•¿"}, {lv: 150, name: "ç™½é“¶è½¦é•¿"},
		{lv: 220, name: "é»„é‡‘è½¦é•¿"}, {lv: 300, name: "ç™½é‡‘è½¦é•¿"}, {lv: 400, name: "ç¿¡ç¿ è½¦é•¿"},
		{lv: 500, name: "é’»çŸ³è½¦é•¿"}, {lv: 600, name: "å¤§å¸ˆè½¦é•¿"}, {lv: 700, name: "å®—å¸ˆè½¦é•¿"},
		{lv: 850, name: "ç¥è±ªè½¦é•¿"}, {lv: 1000, name: "é­”éƒ½è½¦é•¿"}, {lv: 1150, name: "å¸éƒ½è½¦é•¿"},
		{lv: 1300, name: "æŠ¤å›½è½¦é•¿"}, {lv: 1500, name: "é•‡å›½è½¦é•¿"}, {lv: 1700, name: "è“æ˜Ÿè½¦é•¿"},
		{lv: 1900, name: "å¤ªé˜³è½¦é•¿"}, {lv: 2100, name: "çŒæˆ·è½¦é•¿"}, {lv: 2400, name: "é“¶æ²³è½¦é•¿"},
		{lv: 2700, name: "å®‡å®™è½¦é•¿"}, {lv: 3000, name: "æ—¶ç©ºç©¿æ¢­è€…"}
	];

	// 2. å•†åº—æ•°æ®ï¼ˆé‡æ„è‡ªé™„ä»¶é…ä»¶ä¸åŠ©æ‰‹ç³»ç»Ÿï¼‰
	const SHOP_ITEMS = [
		{id: 1, type: 'acc', name: "è½¦è½½é¦™æ°›", baseCost: 3e7, income: 3000, unlock: 30},
		{id: 2, type: 'acc', name: "çœŸçš®åº§å¥—", baseCost: 2e8, income: 20000, unlock: 30},
		{id: 3, type: 'helper', name: "åŠ©æ‰‹ï¼šæ—æ‚¦èˆ’", baseCost: 1e3, income: 2, unlock: 10},
		{id: 4, type: 'helper', name: "åŠ©æ‰‹ï¼šæ²ˆå†°å²š", baseCost: 5e4, income: 10, unlock: 30},
		{id: 5, type: 'car', name: "äºŒæ‰‹æ·è¾¾", baseCost: 2e12, income: 2e7, unlock: 300}
	];

	let game = {
		money: 0, level: 1, incomePerSec: 0, 
		baseClick: 2, nextLvCost: 10, itemsOwned: []
	};

	function formatNum(num) {
		if (num < 1e4) return Math.floor(num);
		if (num < 1e8) return (num/1e4).toFixed(2) + "ä¸‡";
		if (num < 1e12) return (num/1e8).toFixed(2) + "äº¿";
		return (num/1e12).toFixed(2) + "å…†";
	}

	function handleTap() {
		let gain = game.level * 2; // åŸºç¡€å…¬å¼ï¼šç­‰çº§ Ã— 2
		game.money += gain;
		showFloatingText(`+${gain}`);
		updateUI();
	}

	function levelUp() {
		if (game.money >= game.nextLvCost) {
			game.money -= game.nextLvCost;
			game.level++;
			game.nextLvCost = Math.floor(game.nextLvCost * 1.05); // ç³»æ•° 1.05
			checkRank();
			updateUI();
			addLog("èŒä¸šç­‰çº§æå‡ï¼æ¥å•å•ä»·ä¸Šæ¶¨ã€‚");
		}
	}

	function checkRank() {
		let currentRank = RANKS[0].name;
		for (let r of RANKS) {
			if (game.level >= r.lv) currentRank = r.name;
		}
		document.getElementById('rank').innerText = "ç§°å·ï¼š" + currentRank;
	}

	function buyItem(id) {
		let item = SHOP_ITEMS.find(i => i.id === id);
		let cost = item.baseCost; 
		if (game.money >= cost) {
			game.money -= cost;
			game.incomePerSec += item.income;
			game.itemsOwned.push(id);
			addLog(`è§£é”äº† ${item.name}ï¼Œè‡ªåŠ¨æ”¶ç›Šå¢åŠ ï¼`);
			updateUI();
		}
	}

	function updateUI() {
		document.getElementById('money').innerText = formatNum(game.money);
		document.getElementById('pps').innerText = formatNum(game.incomePerSec);
		document.getElementById('lv').innerText = game.level;
		document.getElementById('nextCost').innerText = formatNum(game.nextLvCost);
		document.getElementById('lvBtn').disabled = game.money < game.nextLvCost;

		// æ¸²æŸ“å•†åº—
		const shopHtml = SHOP_ITEMS.map(item => {
			const isUnlocked = game.level >= item.unlock;
			const isBought = game.itemsOwned.includes(item.id);
			return `
				<div class="item" style="opacity: ${isUnlocked ? 1 : 0.5}">
					<div>
						<strong>${item.name}</strong><br>
						<small>${isUnlocked ? 'æ”¶ç›Š: +'+formatNum(item.income)+'/ç§’' : item.unlock+'çº§è§£é”'}</small>
					</div>
					<button class="buy-btn" 
						${(!isUnlocked || isBought || game.money < item.baseCost) ? 'disabled' : ''} 
						onclick="buyItem(${item.id})">
						${isBought ? 'å·²æ‹¥æœ‰' : formatNum(item.baseCost)}
					</button>
				</div>
			`;
		}).join('');
		document.getElementById('shop').innerHTML = shopHtml;
	}

	function addLog(m) {
		document.getElementById('logs').innerText = m;
	}

	function showFloatingText(txt) {
		addLog("æ­£åœ¨æ¥å•ä¸­... " + txt);
	}

	setInterval(() => {
		game.money += game.incomePerSec / 10;
		updateUI();
	}, 100);

	updateUI();
</script>
</body>
</html>